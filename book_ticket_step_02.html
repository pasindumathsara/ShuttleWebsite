<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book your ticket</title>
    <link rel="stylesheet" href="CSS/book_ticket_step_02.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<style>
     .navbar {
            display:block ;
            flex-direction: column;
            background-color: #333;
            color: white;
            padding: 10px;
        }
        .nav-top, .nav-bottom {
            display: flex;
            justify-content: space-between;
        }
        .nav-bottom a {
            color: white;
            padding: 14px 20px;
            text-decoration: none;
            text-align: center;
        }
        .nav-bottom a:hover {
            background-color: #ddd;
            color: black;
        }
        .search-container {
            display: flex;
        }
        .profile-container {
            display: flex;
        }
        .hero-section {
            position: relative;
            text-align: center;
            color: white;
            top: -35px;
        }
        .hero-image-slider img {
            width: 100%;
            height: auto;
            opacity: 0;
            transition: opacity 1s;
        }
        .hero-image-slider img:first-child {
            opacity: 1;
        }
        .booking-form {
            position: relative;
            width: 1100px;
            height: 350px;
            background: linear-gradient(to right, rgb(38, 109, 189) 30%, rgb(255, 255, 255) 25%);
            left: 220px;
            top:   -762px;

        }
        .booking-form label {
            display: block;
            margin: 10px 0 5px;
        }
        .booking-form input, .booking-form select {
            width: calc(100% - 20px);
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            border: none;
        }
        .booking-form button {
            position: relative;
            width: 120px;
            height:35px;
            left: 150px;
            top: -370px;
            border-radius: 5px;
            border-color:#dbd6d6;
            background-color: #dccfd0;
        }
        .booking-form button.cancel {
            background-color: #dccfd0;
        }
        .booking-form button:hover {
            
            background-color: rgb(78, 157, 247);
            cursor: pointer;
        }




        footer {
            background-color: #1b3e54;
            color: white;
            text-align: center;
            padding: 20px;
            position: relative;
            bottom: 0;
            width: 100%;
            top:105px;
        }

        .footer-links {
            margin-top: 10px;
        }

        .footer-links a {
            color: #c6d1da;
            margin: 0 10px;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: #ffa500; /* Darker gold on hover */
        }

        .navbar {
    display: flex;
    flex-direction: column;
    background-color:#1b3e54;
    opacity: 0.9;
    padding: 0;
    color: white;
    position: relative; /* Change this from fixed to relative */
    width: 100%; /* Full width */
}
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px; /* Adjusted padding */
            height: 80px;
        }

        .search-container {
            display: flex;
            align-items: center;
            margin-right: 10px;
            flex: 1;
            position: relative; 
        }

        #searchBar {
            width: 500px; /* Adjusted width */
            padding: 10px;
            background-color: #ddd;
            border: none;
            border-radius: 5px;
            margin-right: 10px; /* Added margin */
        }

        .search-icon {
            background: url('icons8-search-50.png') no-repeat center;
            width: 24px;
            height: 24px;
            cursor: pointer;
            position: absolute;
            right: 10px; /* Positioned right side of search bar */
        }

        #profileButton {
            display: flex;
            align-items: center;
            padding: 10px;
            background-color: #555;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #profileButton .profile-icon {
            width: 20px;
            height: 20px;
            margin-right: 5px;
        }

        .bottom-bar {
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            width: 100%; /* Full width */
            background-color:#1b3e54;
        }

        .bottom-bar a {
            color: white;
            text-decoration: none;
            padding: 10px;
            border-radius: 5px;
        }
        .top-bar a {
            color: white;
            text-decoration: none;
            padding: 10px;
            border-radius: 5px;
        }

        .bottom-bar a:hover {
            background-color: #555;
        }

        #eventList {
            padding: 20px;
            display: none;
            position: relative;
            width: 400px;
            background: transparent;
        }

        .event-item {
            padding: 10px;
            border-bottom: 1px solid #ddd;
            cursor: pointer;
        }

        @media screen and (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                align-items: stretch;
            }

            .search-container {
                margin: 10px 0;
            }

            #searchBar {
                width: 100%; /* Full width in smaller screens */
                margin-right: 0; /* No right margin */
            }

            .search-icon {
                margin-left: 0; /* Adjusted for smaller screens */
                right: 10px;
            }

            #profileButton {
                justify-content: center;
                margin-top: 10px; /* Added margin */
            }
        }

</style>
<body>
    <div class="navbar">
        <div class="top-bar">
            <img src="Images/iconss.jpg" alt="" width="120px" height="90px" style="position:relative; top: 2px;left: -300px; border-radius:5px">
            
            <div class="search-container" style="position: relative;left: -220px;" >
                <input type="text" id="searchBar" placeholder="Search events..." onclick="toggleEventList()" oninput="filterEvents()">
                <div class="search-icon"></div>
                <img src="Images/icons8-search-50.png" alt="" style="position: relative; width: 28px; height: 28px; left: -50px;">
            </div>
            <img src="Images/admin3.jpg" alt="" style="position: relative; width: 40px; height: 40px; left: 330px;">
            <a href="StudentProfile.php" style="position: relative;left: 330px;">My Profile</a>
            
                
        </div>
        <div class="bottom-bar">
            <a href="home.html"style="position: relative;left: 290px;">Home</a>
            <a href="New_Catergory.html"style="position: relative;left: 120px;">Categories</a>
            <a href="event.html"style="position: relative;left: -50px;">Events</a>
            <a href="contactus2.html"style="position: relative;left: -220px;">Contact Us</a>
            <button class="profile-btn" onclick="window.location.href='logout.php'" style="background-color:#1b3e54; position:relative;width:00px; font-size:16px;">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
           
        </div>
    </div>
<div style="position: relative; ">
    <div class="progress-container" style="position: relative; top: 90px; left: 150px;">
        <div class="progress-bar" id="progress-bar"></div>
        <div class="progress-step active" data-step="1">choose</div>
        <div class="progress-step" data-step="2">details</div>
        <div class="progress-step" data-step="3">accept</div>
        <div class="progress-step" data-step="4">payment</div>
    </div>

    <div class="heading">
        <p style="color: rgb(22, 21, 21);position: relative;top: 15px;left: 40px;"><b>Details of service</b></p>
    </div>

    <div class="xy">
        <div style="position:relative; top: -30px;">
            <img src="Images/busimge.png" alt="" style="height: 30px; width: 30px; position: relative;left: 60px;top: 70px;">
            <p style="position: relative;left: 100px; top:25px; font-family:'Times New Roman', Times, serif; font-size: 17px;">Bus info</p>
        </div>
        <h2 style="position: relative; left: 50px; top: 20px; font-family: 'Times New Roman', Times, serif;">Gampaha - CINEC Campus</h2>
        <p style="position: relative; top: 5px;left:50px;">(Monday to Friday)</p>

        <hr>
        <p style="position: relative; left: 110px; top:10px;"> Gampaha to CINEC</p>

        <table style="position: relative; left: 100px; top:50px; border: none;" id="gampahaToCinecTable">
            <thead>
                <tr>
                    <th>Bus Number</th>
                    <th>Driver Name</th>
                    <th>ID Card Number</th>
                    <th>Departure Time</th>
                    <th>Arrival Time</th>
                    <th>Booked Seats (This Month)</th>
                    <th>Price</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data will be inserted here dynamically -->
            </tbody>
        </table>

        <div style="position: relative; top: 80px;">
            <p style="position: relative; left: 110px; top:10px;"> CINEC to Gampaha</p>

            <table style="position: relative; left: 100px; top:50px; border: none;" id="cinecToGampahaTable">
                <thead>
                    <tr>
                        <th>Bus Number</th>
                        <th>Driver Name</th>
                        <th>ID Card Number</th>
                        <th>Departure Time</th>
                        <th>Arrival Time</th>
                        <th>Booked Seats (This Month)</th>
                        <th>Price</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be inserted here dynamically -->
                </tbody>
            </table>

            <div style="position: relative; top: 90px; left: 900px;">
                <button onclick="location.href='book_ticket.html'" style="position: relative; width: 100px;">Back</button>
                <button id="proceed-btn" style="position: relative; width: 100px;">Proceed</button>
            </div>
            
        </div>
    </div>
</div>
    <script src="JS/book_ticket_step_02.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
    // Fetch data from the PHP script
    fetch('PHP/book_ticket_step_02.php')
        .then(response => response.json()) // Parse the JSON response
        .then(data => {
            const gampahaToCinecTable = document.getElementById('gampahaToCinecTable').getElementsByTagName('tbody')[0];
            const cinecToGampahaTable = document.getElementById('cinecToGampahaTable').getElementsByTagName('tbody')[0];

            let selectedBus = null;

            function handleBusSelection(busData) {
                selectedBus = busData;
            }

            data.forEach((row, index) => {
                const newRow = document.createElement('tr');
                const busDetails = `
                    <td>${row.Bus_Number}</td>
                    <td>${row.Driver_name}</td>
                    <td>${row.Id_no}</td>
                    <td>${row.Departure_time}</td>
                    <td>${row.Arrival_time}</td>
                    <td>${row.booked_seats}</td>
                    <td>${row.price}</td>
                    <td><input type="radio" name="busSelection" value="${row.Bus_Number}" style="position:relative; left:-1120px"></td>
                `;
                newRow.innerHTML = busDetails;

                if (row.Departure_time.includes('AM')) {
                    gampahaToCinecTable.appendChild(newRow);
                } else {
                    cinecToGampahaTable.appendChild(newRow);
                }

                newRow.querySelector('input[type="radio"]').addEventListener('change', function () {
                    handleBusSelection(row);
                });
            });

            document.getElementById('proceed-btn').addEventListener('click', function () {
                if (selectedBus) {
                    // Redirect to the next page with Bus Number as a URL parameter
                    location.href = `book_ticket_step_03.html?busNumber=${selectedBus.Bus_Number}`;
                } else {
                    alert("Please select a bus before proceeding.");
                }
            });
        })
        .catch(error => console.error('Error fetching data:', error));
});

    </script>
      <footer>
        <p>&copy; 2024 Cinec Shuttle Service. All rights reserved.</p>
        <div class="footer-links">
            <a href="#">Privacy Policy</a>
            <a href="#">Terms of Service</a>
            <a href="#">Help</a>
        </div>
    </footer>
</body>
</html>
